(function(){var a,b,c;(function(a){if(typeof c!="undefined")return;var d=[],e;c=e=function(a,b,c){var e=a.indexOf(".js");e!==-1&&(a=a.substring(0,e)),arguments.length==2&&(c=b,b=[]);if(typeof c=="function"){var f=[];for(var g=0;g<b.length;g++){var h=b[g];f.push(d[h])}c=c.apply(this,f)}d[a]=c},b=function(a,b){if(typeof b=="function"){var c=[];for(var e=0;e<a.length;e++){var f=a[e];c.push(d[f])}b.apply(this,c)}}})(window),c("angular",[],function(){if(typeof angular!="undefined")return angular}),c("stng/util",["angular"],function(a){function b(a,b){return b===undefined?a.data("stwidget"):(a.data("stwidget",b),b)}function c(a){var b;while(a.length>0&&a[0]!==document.documentElement){b=a.data("stwidget");if(b)return b;a=a.parent()}return null}function e(a){var b={},c,d;for(c in a)d=a[c],c=f(c),d=h(c,d),i(b,c,d);return b}function f(a){var b=a.split("-"),c=b[0];for(var d=1,e;d<b.length;d++)e=b[d],c+=e.substring(0,1).toUpperCase()+e.substring(1);return c}function h(a,b){return g.test(b)?b=parseInt(b):b==="true"?b=!0:b==="false"&&(b=!1),b}function i(a,b,c){var d,e,f;d=b.split(".");for(e=0;e<d.length-1;e++)f=d[e],a[f]||(a[f]={}),a=a[f];a[d[d.length-1]]=c}function j(a){while(a.length){var c=b(a);c&&(c.doComponentLayout&&c.doComponentLayout(),c.doLayout&&c.doLayout()),a=a.parent()}}function k(c){var d=b(c),e=c.children();for(var f=0;f<e.length;f++)k(a.element(e[f]));d&&(d.destroy(),b(c,undefined))}function m(b){var c=d(b);for(var f in c)!l[f]&&f.indexOf(":")===-1&&b.removeAttr(f);var g=e(c);return b.prepend("<!-- options "+a.toJson(g)+"-->"),g}var d=function(a){var b={},c=a[0].attributes;for(var d=0,e=c.length,f;d<e;d++)f=c.item(d),b[f.nodeName]=f.nodeValue;return b},g=/^[0-9]+$/,l={"class":!0,style:!0,id:!0};return{layoutWithParents:j,destroyWidgetsUnder:k,stWidget:b,nearestStWidget:c,stOptions:e,jqLite:a.element,attributes:d,getOptionsAndRemoveAttributes:m}}),c("ext",[],function(){if(typeof Ext!="undefined")return Ext}),c("stng/globalScope",["angular"],function(a){return a.scope()}),c("stng/customComponent",["ext","stng/util"],function(a,b){var c=b.jqLite;a.AngularComponent=a.extend(a.Component,{children:undefined,onRender:function(){this.children=c(this.el.dom).children(),a.AngularComponent.superclass.onRender.apply(this,arguments)},initContent:function(){var a=c(this.getTargetEl().dom);a.append(this.children)}}),a.reg("custom",a.AngularComponent)}),c("stng/lists",["ext","stng/util","stng/customComponent"],function(a,b){function d(a){return a[0].nodeType===1}function e(a){var b=[],d;for(var e=0;e<a.length;e++){d=a[e].childNodes;for(var f=0;f<d.length;f++)b.push(d.item(f))}return c(b)}function f(a,b){var d,f;for(var g=0;g<a.length;g++)d=a.eq(g),f=c(b),f.append(e(d)),d.append(f)}var c=b.jqLite;a.AngularBaseList=a.extend(a.AngularComponent,{componentCls:"x-list",initComponent:function(){this.scroll!==!1&&(this.scroll={direction:"vertical"}),a.AngularBaseList.superclass.initComponent.call(this)}}),a.AngularList=a.extend(a.AngularBaseList,{initContent:function(){a.AngularList.superclass.initContent.call(this);var b=c(this.getTargetEl().dom),d=b.children();d.addClass("x-list-item"),f(d,'<div class="x-list-item-body"></div>')}}),a.reg("ng-list",a.AngularList),a.AngularGroupedList=a.extend(a.AngularBaseList,{initContent:function(){a.AngularGroupedList.superclass.initContent.call(this);var b=c(this.getTargetEl().dom).children(),e,g,h;for(var i=0;i<b.length;i++)e=b.eq(i),d(e)&&(e.addClass("x-list-group"),g=e.attr("group"),e.removeAttr("group"),h=e.children(),h.addClass("x-list-item"),f(h,'<div class="x-list-item-body"></div>'),f(e,'<div class="x-list-group-items"></div>'),e.prepend('<h3 class="x-list-header">'+g+"</h3>"))}}),a.reg("ng-grouped-list",a.AngularGroupedList),angular.directive("st:selected",function(a){return function(b){var c=this;c.$watch(a,function(a){a?b.addClass("x-item-selected"):b.removeClass("x-item-selected")})}})}),c("stng/navigation",["angular","stng/util"],function(a,b){function d(a){var b=a.indexOf(":");return b===-1?[a]:[a.substring(0,b),a.substring(b+1)]}function e(a){var b=d(a),c,e;b.length===2?(c=b[0],e=b[1]):(e=b[0],c=undefined),g(e,c)}function g(a,d){f&&(f.hide(),f=null);if(a==="back")return;var e,g=c(document.getElementById(a));e=b.stWidget(g);if(e.floating)e.show(),f=e;else{var h=e.ownerCt;h.setActiveItem&&h.setActiveItem(e,d)}}var c=b.jqLite,f;return a.service("$navigate",function(){return e}),a.Object.navigate=function(a){var b=a.$service("$navigate");if(arguments.length===2){b(arguments[1]);return}var c=arguments[1],e={},f;for(var g=2;g<arguments.length;g++)f=d(arguments[g]),e[f[0]]=f[1];c&&c.then?c.then(function(a){e[a]?b(e[a]):e.success&&b(e.success)},function(a){e[a]?b(e[a]):e.failure&&b(e.failure)}):e[c]?b(e[c]):c!==!1&&e.success?b(e.success):c===!1&&e.failure&&b(e.failure)},e}),c("stng/if",["angular"],function(a){a.Object.iff=function(a,b,c,d){return b?c:d},a.widget("@st:if",function(b,c){var d="stif in $iff("+b+",[1],[])";return c.removeAttr("st:if"),a.widget("@ng:repeat").call(this,d,c)})}),c("stng/repeat",["angular","stng/util"],function(a,b){a.widget("@ng:repeat",function(c,d){d.removeAttr("ng:repeat"),d.replaceWith(a.element("<!-- ng:repeat: "+c+" -->"));var e=this.compile(d);return function(d){var f=c.match(/^\s*(.+)\s+in\s+(.*)\s*$/),g,h,i,j;if(!f)throw Error("Expected ng:repeat in form of '_item_ in _collection_' but got '"+c+"'.");g=f[1],h=f[2],f=g.match(/^([\$\w]+)|\(([\$\w]+)\s*,\s*([\$\w]+)\)$/);if(!f)throw Error("'item' in 'item in collection' should be identifier or (key, value) but got '"+h+"'.");i=f[3]||f[1],j=f[2];var k=[],l=this;this.$onEval(function(){var c=0,f=k.length,g=d,m=this.$tryEval(h,d),n=a.Array.size(m,!0),o,p;for(p in m)m.hasOwnProperty(p)&&(c<f?(o=k[c],o[i]=m[p],j&&(o[j]=p),g=o.$element,o.$position=c==0?"first":c==n-1?"last":"middle",o.$eval()):(o=a.scope(l),o[i]=m[p],j&&(o[j]=p),o.$index=c,o.$position=c==0?"first":c==n-1?"last":"middle",k.push(o),e(o,function(a){a.attr("ng:repeat-index",c),g.after(a),g=a})),c++);while(k.length>c){var q=k.pop(),r=q.$element;b.destroyWidgetsUnder(r),r.remove()}},d)}})}),c("stng/settings",["stng/util"],function(a){var b=document.getElementsByTagName("meta"),c={};for(var d=0;d<b.length;d++){var e=a.jqLite(b[d]);c[e.attr("name")]=e.attr("content")}var f=a.stOptions(c);return f}),c("stng/compileIntegration",["angular","ext","stng/util","stng/settings","stng/globalScope"],function(a,b,c,d,e){function h(){var a=b.ComponentMgr.types;for(var c in a)j(a,c)||k(c)}function i(a){return a.indexOf(g)===0&&(a=a.substring(3)),a}function j(a,b){return!!a[g+b]}function k(b){var c=i(b);a.widget("st:"+c,function(a){return n.call(this,b,a)})}function n(a,d){var e=this;if(d.attr("st:compiled"))return this.descend(!0),this.directives(!0),function(){};var f=c.getOptionsAndRemoveAttributes(d);d.attr("st:compiled","true");var g=l++;return this.descend(!1),this.directives(!1),function(d){function i(a){var b=m;m=a;var c=h.$element;e.compile(d)(h),h.$element=c,m=b}var h=this;f.el=b.Element.get(d[0]);var j=b.ComponentMgr.types[a].prototype,k;j.add?k="initContent":k="afterRender";var l=j[k];f[k]=function(){var a=l.apply(this,arguments);return c.stWidget(d,this),i(this),a};var n=b.create(f,a);c.stWidget(d,n),n.compileIndex=g;var o=m;o||(o=c.nearestStWidget(d.parent()));if(n&&o&&!f.floating){if(f.dock)o.addDocked(n);else{var p=0;while(p<o.items.length&&o.items.getAt(p).compileIndex<=g)p++;o.add(p,n)}m||o.doLayout()}}}var f=c.jqLite,g="ng-",l=0,m;return d.autoStart&&(d.launch=function(){var b=f(document.getElementsByTagName("body"));a.compile(b)(e)},new b.Application(d)),{registerWidgets:h}}),c("stng/paging",["ext","angular","stng/globalScope","stng/settings"],function(a,b,c,d){function h(a){var b=[];for(var c in f)b[c]=f[c];b.init(a);var d=b.hasOwnProperty;return b.hasOwnProperty=function(a){return a in f||a in g?!1:d.apply(this,arguments)},b}function i(a){a.pageSize?this.pageSize=a.pageSize:this.pageSize=d.listPageSize,this.originalList=a,this.refreshNeeded=!0,this.reset()}function j(){var a=this.originalList;this.filter&&(a=b.Array.filter(a,this.filter)),this.orderBy&&(a=b.Array.orderBy(a,this.orderBy));var c=this.loadedCount;c<this.pageSize&&(c=this.pageSize),c>a.length&&(c=a.length),this.loadedCount=c,this.availableCount=a.length;var d=a.slice(0,c),e=[0,this.length].concat(d);this.splice.apply(this,e)}function k(){return this.evalId!=e&&(this.refreshNeeded=!0,this.evalId=e),this.refreshNeeded&&(this.refresh(),this.refreshNeeded=!1),this}function l(a){b.Object.equals(this.filter,a)||(this.filter=a,this.refreshNeeded=!0)}function m(a){b.Object.equals(this.orderBy,a)||(this.orderBy=a,this.refreshNeeded=!0)}function n(){this.loadedCount=this.loadedCount+this.pageSize,this.refreshNeeded=!0}function o(){return this.refreshIfNeeded(),this.loadedCount<this.availableCount}function p(){this.loadedCount=0,this.refreshNeeded=!0}d.listPageSize||(d.listPageSize=10);var e=0;c.$onEval(-99999,function(){e++});var f={init:i,refresh:j,refreshIfNeeded:k,setFilter:l,setOrderBy:m,loadNextPage:n,hasMorePages:o,reset:p},g={pageSize:!0,originalList:!0,refreshNeeded:!0,filter:!0,orderBy:!0,loadedCount:!0,availableCount:!0,evalId:!0};b.Array.paged=function(a,b,c){var d=a.pagedList;return d||(d=h(a),a.pagedList=d),d.setFilter(b),d.setOrderBy(c),d.refreshIfNeeded(),d}}),c("stng/events",["angular","stng/util"],function(a,b){function d(a,b){function d(d){var e;d.getTarget?e=d.getTarget():e=d.getEl().dom;var f=a.dom,g,h,i,j;do{i=c(e),g=i.data("customEvents");if(g&&g[b]){var k=g[b];h=i.scope(),j=h;for(var l=0;l<k.length;l++)h.$tryEval(k[l],i)}e=e.parentNode}while(e!==null&&e!==f);j&&j.$service("$updateView")()}var e=a.customEvents&&a.customEvents[b];a.customEvents||(a.customEvents={}),a.customEvents[b]=!0,e||(a.events[b]?a.addListener(b,d):a.addManagedListener(a.getTargetEl(),b,d,a))}function e(a,b,d){var e=c(a),f=e.data("customEvents");f||(f={},e.data("customEvents",f));var g=f[b];g||(g=[],f[b]=g),g.push(d)}var c=b.jqLite;a.directive("st:event",function(c,f){var g=a.fromJson(c),h=function(a,c){var f=b.nearestStWidget(c);for(var h in g){d(f,h);var i=g[h];e(c,h,i)}};return h.$inject=["$updateView"],h})}),c("stng/waitDialog",["ext","angular"],function(a,b){function e(){d&&(d.hide(),d=null);if(c.length>0){var b=c[c.length-1],e={};b.msg&&(e.msg=b.msg),d=new a.LoadMask(a.getBody(),e),d.show(),b.callback&&d.el.select(".x-mask").on("tap",b.callback)}}function f(){var a,b;typeof arguments[0]=="string"&&(a=arguments[0]),typeof arguments[0]=="function"&&(b=arguments[0]),typeof arguments[1]=="function"&&(b=arguments[1]),c.push({msg:a,callback:b}),e()}function g(){c.pop(),e()}function h(a,b){f(),a.always(function(){g()})}function i(a,b,c){f(c,function(){a.reject(b)}),a.always(function(){g()})}function j(){c=[],e()}var c=[],d,k={show:f,hide:g,waitFor:h,waitForWithCancel:i,hideAll:j};return b.service("$waitDialog",function(){return k}),k}),c("stng/input",["angular"],function(a){function b(a){return a.isChecked?a.xtype==="radiofield"?a.isChecked()?a.getValue():undefined:a.isChecked():a.getValue()}function c(a,b){a.setChecked?a.xtype==="radiofield"?a.value==b&&a.setChecked(!0):a.setChecked(b):a.setValue(b)}function d(a,b){a.events.check?(a.addListener("check",b),a.addListener("uncheck",b)):a.events.spin?(a.addListener("spin",b),a.addListener("change",b)):a.addListener("change",b)}a.widget("input",function(){return function(){}});var e=Ext.form.Field.prototype.initEvents;Ext.form.Field.prototype.initEvents=function(){var f=e.apply(this,arguments);if(this.name){var g=this,h=a.element(g.el.dom).scope(),i;h.$onEval(-1e3,function(){var a=h.$get(g.name);i!==a&&(c(g,a),i=a)}),d(this,function(){var a=b(g);i=a,h.$set(g.name,a),h.$service("$updateView")()})}}}),c("stng/stngStyles",["angular"],function(){var a=".st-spacer {display: block}";angular.element(document).find("head").append('<style type="text/css">'+a+"</style>")}),c("stng/sharedController",["angular"],function(a){function b(a){var b=a.split("."),c=window,d;for(var e=0;e<b.length;e++)d=b[e],c=c[d];return c}function c(a,c){var d=b(c),e=a[c];return e||(e=a.$new(d),a[c]=e),e}function d(a){var b=/(.*?):(.*?)($|,)/g,c,d=!1,e={};while(c=b.exec(a))d=!0,e[c[1]]=c[2];if(!d)throw"Expression "+a+" needs to have the syntax <name>:<controller>,...";return e}a.directive("st:shared-controller",function(a){this.scope(!0);var b=d(a);return function(a){var d=this;for(var e in b)d[e]=c(d.$root,b[e])}})}),c("st-angular",["angular","stng/util","stng/compileIntegration","stng/customComponent","stng/lists","stng/navigation","stng/if","stng/paging","stng/repeat","stng/settings","stng/events","stng/waitDialog","stng/input","stng/stngStyles","stng/sharedController"],function(a,b,c){return c.registerWidgets(),{}})})()